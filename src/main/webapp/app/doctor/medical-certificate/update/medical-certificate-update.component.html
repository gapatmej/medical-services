<div class="row justify-content-center">
  <div class="col-8">
    <form name="editForm" role="form" novalidate (ngSubmit)="save()" [formGroup]="editForm">
      <h2 jhiTranslate="medicalCertificate.home.createOrEditLabel"></h2>

      <div>
        <div class="row">
          <div class="col-6 form-group">
            <label class="form-control-label" jhiTranslate="medicalCertificate.emissionDate"></label>
            <div class="d-flex">
              <input
                name="emissionDate"
                class="form-control"
                formControlName="emissionDate"
                matInput
                [matDatepicker]="emissionDatePicker"
              />
              <mat-datepicker-toggle matSuffix [for]="emissionDatePicker"></mat-datepicker-toggle>
              <mat-datepicker #emissionDatePicker></mat-datepicker>
            </div>
            <jhi-input-validation [control]="editForm.get('emissionDate')"></jhi-input-validation>
          </div>
        </div>

        <div class="form-group">
          <label class="form-control-label" jhiTranslate="medicalCertificate.patient"></label>
          <input
            class="form-control"
            type="text"
            aria-label="Number"
            matInput
            name="patient"
            (input)="searchPatient()"
            formControlName="patient"
            [matAutocomplete]="autoPatient"
          />
          <mat-autocomplete #autoPatient="matAutocomplete" [displayWith]="displayPatient">
            <mat-option *ngFor="let patient of patients" [value]="patient">
              {{ patientLabelSelector(patient) }}
            </mat-option>
          </mat-autocomplete>
          <jhi-input-validation [control]="editForm.get('patient')"></jhi-input-validation>
        </div>

        <div class="form-group">
          <label class="form-control-label" jhiTranslate="medicalCertificate.diagnosis"></label>
          <textarea type="text" class="form-control" rows="4" cols="50" name="diagnosis" formControlName="diagnosis"></textarea>
          <jhi-input-validation [control]="editForm.get('diagnosis')"></jhi-input-validation>
        </div>

        <div class="row">
          <div class="form-group col-6">
            <label class="form-control-label" jhiTranslate="medicalCertificate.internationalDisease"></label>
            <input
              class="form-control"
              type="text"
              aria-label="Number"
              matInput
              name="internationalDisease"
              (input)="searchInternationalDisease()"
              formControlName="internationalDisease"
              [matAutocomplete]="internationaDiseaseAutocomplete"
            />
            <mat-autocomplete #internationaDiseaseAutocomplete="matAutocomplete" [displayWith]="displayInternationalDisease">
              <mat-option *ngFor="let internationalDisease of internationalDiseases" [value]="internationalDisease">
                {{ internationalDiseaseLabelSelector(internationalDisease) }}
              </mat-option>
            </mat-autocomplete>
            <jhi-input-validation [control]="editForm.get('internationalDisease')"></jhi-input-validation>
          </div>

          <div class="form-group col-6">
            <label class="form-control-label" jhiTranslate="medicalCertificate.contingencyType.label"></label>

            <mat-select class="form-control" name="contingencyType" formControlName="contingencyType">
              <mat-option *ngFor="let contingencyType of ContingencyType | keyvalue" [value]="contingencyType.key">
                <span [jhiTranslate]="'medicalCertificate.contingencyType.options.' + contingencyType.key"></span>
              </mat-option>
            </mat-select>

            <jhi-input-validation [control]="editForm.get('contingencyType')"></jhi-input-validation>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-2 col-form-label" jhiTranslate="medicalCertificate.symptoms"></label>
          <div class="col-sm-10">
            <span jhiTranslate="global.form.no"></span>
            <mat-slide-toggle name="symptoms" formControlName="symptoms"></mat-slide-toggle>
            <span jhiTranslate="global.form.yes"></span>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-2 col-form-label" jhiTranslate="medicalCertificate.disease"></label>
          <div class="col-sm-10">
            <span jhiTranslate="global.form.no"></span>
            <mat-slide-toggle name="disease" formControlName="disease" (change)="onChangeDisease($event)"></mat-slide-toggle>
            <span jhiTranslate="global.form.yes"></span>
          </div>
        </div>

        <div class="form-group" *ngIf="editForm.get('diseaseDescription')">
          <label class="form-control-label" jhiTranslate="medicalCertificate.diseaseDescription"></label>
          <textarea
            type="text"
            class="form-control"
            rows="4"
            cols="50"
            name="diseaseDescription"
            formControlName="diseaseDescription"
          ></textarea>
        </div>

        <div class="form-group row">
          <label class="col-sm-2 col-form-label" jhiTranslate="medicalCertificate.insulation"></label>
          <div class="col-sm-10">
            <span jhiTranslate="global.form.no"></span>
            <mat-slide-toggle name="insulation" formControlName="insulation" (change)="onChangeInsulation($event)"></mat-slide-toggle>
            <span jhiTranslate="global.form.yes"></span>
          </div>
        </div>

        <div class="form-group" *ngIf="editForm.get('insulationDescription')">
          <label class="form-control-label" jhiTranslate="medicalCertificate.insulationDescription"></label>
          <textarea
            type="text"
            class="form-control"
            rows="4"
            cols="50"
            name="insulationDescription"
            formControlName="insulationDescription"
          ></textarea>
        </div>

        <div class="row">
          <div class="col-4 form-group">
            <label class="form-control-label" jhiTranslate="medicalCertificate.fromDate"></label>
            <div class="d-flex">
              <input
                name="fromDate"
                class="form-control"
                formControlName="fromDate"
                matInput
                [matDatepicker]="fromDatePicker"
                (dateChange)="onChangeFromDate()"
              />
              <mat-datepicker-toggle matSuffix [for]="fromDatePicker"></mat-datepicker-toggle>
              <mat-datepicker #fromDatePicker></mat-datepicker>
            </div>
            <jhi-input-validation [control]="editForm.get('fromDate')"></jhi-input-validation>
          </div>
          <div class="col-4 form-group">
            <label class="form-control-label" jhiTranslate="medicalCertificate.untilDate"></label>
            <div class="d-flex">
              <input
                name="untilDate"
                [min]="editForm.get('fromDate')!.value"
                class="form-control"
                formControlName="untilDate"
                matInput
                [matDatepicker]="untilDatePicker"
              />
              <mat-datepicker-toggle matSuffix [for]="untilDatePicker"></mat-datepicker-toggle>
              <mat-datepicker #untilDatePicker></mat-datepicker>
            </div>
            <jhi-input-validation [control]="editForm.get('untilDate')"></jhi-input-validation>
          </div>
          <div class="col-4 form-group">
            <label class="form-control-label" jhiTranslate="medicalCertificate.totalDaysOff"></label>
            <div>
              <span>{{ totalDaysOff }}</span>
            </div>
          </div>
        </div>
      </div>

      <div>
        <button type="button" id="cancel-save" class="btn btn-secondary" (click)="previousState()">
          <fa-icon icon="ban"></fa-icon>&nbsp;<span jhiTranslate="global.actions.cancel"></span>
        </button>

        <button type="submit" [disabled]="editForm.invalid || isSaving" class="btn btn-primary">
          <fa-icon icon="save"></fa-icon>&nbsp;<span jhiTranslate="global.actions.save"></span>
        </button>
      </div>
    </form>
  </div>
</div>
